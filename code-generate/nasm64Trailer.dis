     1                                  ; Simple frame for NASM testing.
     2                                  ; Trial compile easily using the script trailer.
     3                                  ; The runners fully link.
     4                                  BITS 64
     5                                  DEFAULT REL
     6                                  
     7                                  
     8                                  ;SECTION .data
     9                                      ;dispMsg db 'You have entered: '
    10                                      ;lenDispMsg equ $-dispMsg 
    11                                  
    12                                  
    13                                  ;SECTION .text          ;Code Segment
    14                                     
    15                                  ;main:
    16                                  
    17                                      ;;Output the message 'The entered number is: '
    18                                      ;mov eax, 4
    19                                      ;mov ebx, 1
    20                                      ;mov ecx, dispMsg
    21                                      ;mov edx, lenDispMsg
    22                                      ;int 80h  
    23                                  
    24                                  
    25                                      
    26                                      ;ret
    27                                  
    28                                  section	.data
    29                                      ;userPrompt db 'Please enter a number: ' ;Ask the user to enter a number
    30                                      ;lenUserPrompt equ $-userPrompt    ;length of the message
    31                                      ;msg db 'Hello, world!', 0xa ;string to be printed
    32                                      ;len equ $ - msg             ;length of the string
    33                                  
    34                                  section .bss           ;Uninitialized data
    35                                      ;num resb 9
    36                                          
    37                                  section	.text
    38                                      global main
    39                                  	
    40                                  main:
    41                                      ;prompt
    42                                      ;mov	rax, 1      ;system call number (sys_write)
    43                                      ;mov	rdi, 1      ;file descriptor (stdout)
    44                                      ;mov	rsi, userPrompt     ;message to write
    45                                      ;mov	rdx, lenUserPrompt  ;message length
    46                                      ;syscall
    47                                      
    48                                      ;;Read and store the user input
    49                                      ;mov rax, 0      ;system call number (sys_read)
    50                                      ;mov rdi, 2      ;file descriptor
    51                                      ;mov rsi, num  
    52                                      ;mov rdx, 9      ;5 bytes (numeric, 1 for sign) of that information
    53                                      ;syscall
    54                                     
    55                                      ;;mov qword[num], 62
    56                                     
    57                                      ;;Output the number entered
    58                                      ;mov rax, 1      ;system call number (sys_write)
    59                                      ;mov	rdi, 1      ;file descriptor (stdout)
    60                                      ;mov rsi, num
    61                                      ;mov rdx, 5      ;5 bytes (numeric, 1 for sign)
    62                                      ;syscall
    63                                      
    64                                      ;;Output the message
    65                                      ;mov	rax, 1      ;system call number (sys_write)
    66                                      ;mov	rdi, 1      ;file descriptor (stdout)
    67                                      ;mov	rsi, msg    ;message to write
    68                                      ;mov	rdx, len    ;message length
    69                                      ;syscall
    70                                      
    71                                      ; simple exit
    72 00000000 B83C000000                  mov	rax, qword 60     ;system call number (sys_exit)
    73 00000005 BF2A000000                  mov	rdi, qword 42     ;system call number return
    74 0000000A 0F05                        syscall
    75                                  
    76                                  
